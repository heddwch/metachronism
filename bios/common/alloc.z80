		GLOBAL	ALLINIT,ALLOC,FREE
		EXT	END,MSIZE
ALLINIT:
		LD	HL, END
		LD	A, L
		OR	A
		JP	Z, NOPAD
		LD	L, 0
		INC	H
NOPAD:		LD	(HEAP), HL
		LD	A, H
		ADD	A, 1
		LD	C, A
		LD	A, MSIZE
		LD	B, 4
MPAGES:		ADD	A, MSIZE
		DEC	B
		JP	NZ, MPAGES

HEAP		DEFW	0
