		MACLIB	CONFIG.INC
		MACLIB	DISKREG.INC
		GLOBAL	MOUNT,UMOUNT
		EXT	DWAIT

;		File name length in B, address in HL
MOUNT:		CALL	DWAIT
		LD	C, DSKDATA
WR_NAME:	CALL	DWAIT
		OUTI
		JP	NZ, WR_NAME
		LD	(HL), 0
		CALL	DWAIT
		LD	A, DOPEN
		OUT	(DSKCTRL), A
		CALL	DWAIT
		IN	A, (DSKCTRL)
		AND	ERR
		JP	NZ, ERR_RET
		LD	A, 0
		RET

UMOUNT:		CALL	DWAIT
		LD	A, DCLOSE
		OUT	(DSKCTRL), A
		RET

ERR_RET:	LD	A, 1
		RET
